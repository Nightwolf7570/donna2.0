"use strict";const n=require("electron"),t=require("path");let e=null;function o(){return e=new n.BrowserWindow({width:1200,height:800,minWidth:800,minHeight:600,webPreferences:{preload:t.join(__dirname,"preload.js"),contextIsolation:!0,nodeIntegration:!1},titleBarStyle:"hiddenInset",show:!1}),e.once("ready-to-show",()=>{e==null||e.show()}),process.env.VITE_DEV_SERVER_URL?(e.loadURL(process.env.VITE_DEV_SERVER_URL),e.webContents.openDevTools()):e.loadFile(t.join(__dirname,"../dist/index.html")),e.on("closed",()=>{e=null}),e}function s(){n.ipcMain.handle("check-server-connection",async(i,r)=>{try{return(await fetch(`${r}/health`)).ok}catch{return!1}})}n.app.whenReady().then(()=>{s(),o(),n.app.on("activate",()=>{n.BrowserWindow.getAllWindows().length===0&&o()})});n.app.on("window-all-closed",()=>{process.platform!=="darwin"&&n.app.quit()});
